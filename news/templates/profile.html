{% extends 'base.html' %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'profile.css' %}">
<div class="profile-container">
    <div class="profile-header">
        <img src="{% static 'default-avatar.png' %}" class="profile-avatar" alt="Profile Avatar">
        <h2>Welcome, {{ user.username }}!</h2>
    </div>
    
    <div class="profile-info">
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Joined:</strong> {{ user.date_joined|date:"M d, Y" }}</p>
        <p><strong>Total Articles Posted:</strong> {{ articles.count }}</p>
        <div class="profile-buttons">
            <a href="{% url 'home' %}" class="btn btn-secondary">🏠 Back to Home</a>
        </div>
    </div>
    
    <h3 class="mt-5 text-center">📝 Your Articles</h3>
    
    {% if articles %}
    <div class="user-articles">
        {% for article in articles %}
        <div class="article-card">
            {% if article.image %}
            <img src="{{ article.image.url }}" alt="{{ article.title }}">
            {% endif %}
            <div class="content">
                <h5>{{ article.title }}</h5>
                <p class="text-muted">🏷️ <strong>Category:</strong> {{ article.category }} | 🕒 <strong>Published:</strong> {{ article.published_at|date:"M d, Y" }}</p>
                <p>{{ article.content|truncatewords:20 }}</p>
                <div class="d-flex justify-content-end">
                    <form method="POST" action="{% url 'delete_article' article.id %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger btn-sm">🗑️ Delete</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-center text-muted">You haven't posted any articles yet.</p>
    {% endif %}
</div>
{% endblock %}
